<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Tabs with NavigationStacks: Deeper Programmatic Navigation | Mark Powell</title>
<meta name="keywords" content="">
<meta name="description" content="There are some great developer posts about programmatic navigation using NavigationStack with NavigationPath such as this one I recently read by David Bureš. This is great for apps that need navigation depth but not breadth. By breadth, I mean apps whose scope contains categories of screens that require a TabView. If your app can benefit from the breadth of using tabs in addition to navigation stacks that give you the depth, you can still achieve programmatic navigation as well.">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/posts/tabs-with-navigation/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fc2656fd60c22d893f42039b52167c0edaa73165c5584c5fe0fdcaa96274e18f.css" integrity="sha256-/CZW/WDCLYk/QgObUhZ8DtqnMWXFWExf4P3KqWJ04Y8=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/tabs-with-navigation/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Mark Powell (Alt + H)">Mark Powell</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/apps/apps/" title="Apps">
                    <span>Apps</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Tabs with NavigationStacks: Deeper Programmatic Navigation
    </h1>
    <div class="post-meta">&lt;span title=&#39;2024-09-22 12:00:00 -0700 PDT&#39;&gt;September 22, 2024&lt;/span&gt;

</div>
  </header> 
  <div class="post-content"><p>There are some great developer posts about programmatic navigation using <code>NavigationStack</code> with <code>NavigationPath</code> such as <a href="https://buresdv.substack.com/p/programmatic-navigation-in-swiftui?r=2vioyx&amp;triedRedirect=true" target="_blank" rel="noopener">this one</a> I recently read by David Bureš. This is great for apps that need navigation depth but not breadth. By breadth, I mean apps whose scope contains categories of screens that require a <code>TabView</code>. If your app can benefit from the breadth of using tabs in addition to navigation stacks that give you the depth, you can still achieve programmatic navigation as well.</p>
<p>If you want to browse or try this example code yourself, the <a href="https://github.com/drmarkpowell/PocketMonsterIndex" target="_blank" rel="noopener">whole project</a> is available (requires iOS 18 or macOS 15 to run).</p>
<h3 id="catching-all-the-tabs-and-nav-stacks">Catching all the tabs and nav stacks<a hidden class="anchor" aria-hidden="true" href="#catching-all-the-tabs-and-nav-stacks">#</a></h3>
<p>For this post, I created an example app with two tabbed views. The first tab displays a Grid view of Pokémon (or a Pokédex if you like). The Grid supports a <code>NavigationStack</code> that displays a detail view if you tap on a grid cell view. The second tab displays a Grid view of Berries (or an inventory if you prefer). Tapping on a grid cell view here pushes a berry detail view onto the second tabbed view&rsquo;s <code>NavigationStack</code>.</p>
<p>Let&rsquo;s start by looking at the main screen that creates a <code>TabView</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span>@Environment(AppModel.<span style="color:#66d9ef">self</span>) <span style="color:#66d9ef">var</span> appModel
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> body: some View {
</span></span><span style="display:flex;"><span>    @Bindable <span style="color:#66d9ef">var</span> appModel = appModel
</span></span><span style="display:flex;"><span>    TabView(selection: <span style="color:#960050;background-color:#1e0010">$</span>appModel.selectedTabName) {
</span></span><span style="display:flex;"><span>        Tab(
</span></span><span style="display:flex;"><span>            TabName.pokedex.title,
</span></span><span style="display:flex;"><span>            systemImage: <span style="color:#e6db74">&#34;square.grid.3x3&#34;</span>,
</span></span><span style="display:flex;"><span>            value: TabName.pokedex
</span></span><span style="display:flex;"><span>        ) {
</span></span><span style="display:flex;"><span>            PokedexScreen()
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Tab(
</span></span><span style="display:flex;"><span>            TabName.berries.title,
</span></span><span style="display:flex;"><span>            systemImage: <span style="color:#e6db74">&#34;carrot.fill&#34;</span>,
</span></span><span style="display:flex;"><span>            value: TabName.berries
</span></span><span style="display:flex;"><span>        ) {
</span></span><span style="display:flex;"><span>            BerriesScreen()
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    .tabViewStyle(.sidebarAdaptable)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This <code>TabView</code> uses the newest SwiftUI API for iOS 18. If you&rsquo;re using the iOS 17 API or earlier, you need to use <code>.tag</code> instead of the <code>value</code> to <a href="https://www.hackingwithswift.com/quick-start/swiftui/how-to-embed-views-in-a-tab-bar-using-tabview" target="_blank" rel="noopener">support tab selection</a> (Thanks, Paul!). I also threw in the iPadOS 18 <code>.sidebarAdaptable</code> tab view style, which Stewart Lynch made a <a href="https://youtu.be/hIoxphFMjYw?si=AQfciJa4qmleCVoq" target="_blank" rel="noopener">great tutorial</a> about, as well as tab customization and reordering (omitted here for brevity).</p>
<p>The <code>AppModel</code> is our application state model class (ViewModel in the MVVM sense if you like) that will contain our selected tab and navigation paths for each tab: The <code>TabView</code> above binds the <code>selectedTab</code> to this var in <code>AppModel</code>. Let&rsquo;s look at that next.</p>
<h3 id="the-appmodel-class">The AppModel Class<a hidden class="anchor" aria-hidden="true" href="#the-appmodel-class">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span>@Observable
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AppModel</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> selectedTabName = TabName.pokedex
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> pokedexTab = TabModel(name: .pokedex)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> berriesTab = TabModel(name: .berries)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">navigateTo</span>(category: String, index: Int) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> category == berriesTab.name.rawValue {
</span></span><span style="display:flex;"><span>            berriesTab.path = NavigationPath([index])
</span></span><span style="display:flex;"><span>            selectedTabName = .berries
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> category == pokedexTab.name.rawValue {
</span></span><span style="display:flex;"><span>            pokedexTab.path = NavigationPath([index])
</span></span><span style="display:flex;"><span>            selectedTabName = .pokedex
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>@Observable
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TabModel</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> name: TabName
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> path = NavigationPath()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">init</span>(name: TabName) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">self</span>.name = name
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">TabName</span>: String, CaseIterable {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> pokedex
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> berries
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> title: String { rawValue.capitalized }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Using an enumeration to define the tabs the app supports is generally a good idea and useful for programmatic navigation. <code>TabModel</code> is a custom <code>@Observable</code> class for capturing each tab instance&rsquo;s unique name along with its <code>NavigationPath</code> so that we can drive that programmatically as well.</p>
<p>Here&rsquo;s a simplified look at the Pokédex view (the first of the tabbed views):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">PokedexScreen</span>: View {
</span></span><span style="display:flex;"><span>    @Environment(AppModel.<span style="color:#66d9ef">self</span>) <span style="color:#66d9ef">var</span> appModel
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> body: some View {
</span></span><span style="display:flex;"><span>        @Bindable <span style="color:#66d9ef">var</span> appModel = appModel
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        NavigationStack(path: <span style="color:#960050;background-color:#1e0010">$</span>appModel.pokedexTab.path) {
</span></span><span style="display:flex;"><span>            LazyVGrid(columns: [...]) {
</span></span><span style="display:flex;"><span>                ForEach(pokemon) { pokemon <span style="color:#66d9ef">in</span>
</span></span><span style="display:flex;"><span>                    Button {
</span></span><span style="display:flex;"><span>                        appModel.pokedexTab.path.append(pokemon.id)
</span></span><span style="display:flex;"><span>                    } label: {
</span></span><span style="display:flex;"><span>                        <span style="color:#75715e">// ... cut for legibility</span>
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            .navigationTitle(Text(TabName.pokedex.title))
</span></span><span style="display:flex;"><span>            .navigationDestination(<span style="color:#66d9ef">for</span>: Int.<span style="color:#66d9ef">self</span>) { id <span style="color:#66d9ef">in</span>
</span></span><span style="display:flex;"><span>                PokemonScreen(id: id)
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>In this view, the <code>NavigationPath</code> is bound to the path for its corresponding <code>TabModel</code> in the <code>AppModel</code>. When the user taps a grid cell view, the ID of the Pokémon is pushed onto the path and the app navigates to a newly created <code>PokemonScreen</code> (view). The <code>BerriesScreen</code> works similarly, navigating to a new <code>BerryScreen</code> when a Berry grid cell view is tapped.</p>
<h3 id="flexible-navigation">Flexible Navigation<a hidden class="anchor" aria-hidden="true" href="#flexible-navigation">#</a></h3>
<p>To show the flexibility of how this programmatic navigation can be used to jump into any content in the app, let&rsquo;s implement deep linking:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-swift" data-lang="swift"><span style="display:flex;"><span>@main
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">PocketMonsterIndexApp</span>: App {
</span></span><span style="display:flex;"><span>    @State <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">var</span> appModel = AppModel()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> body: some Scene {
</span></span><span style="display:flex;"><span>        WindowGroup {
</span></span><span style="display:flex;"><span>            TabsView()
</span></span><span style="display:flex;"><span>                .environment(appModel)
</span></span><span style="display:flex;"><span>                .onOpenURL { url <span style="color:#66d9ef">in</span>
</span></span><span style="display:flex;"><span>                    print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\(</span>url.pathComponents<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">guard</span> <span style="color:#66d9ef">let</span> index = Int(url.pathComponents.last ?? <span style="color:#e6db74">&#34;&#34;</span>) <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">return</span> 
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">guard</span> <span style="color:#66d9ef">let</span> category = url.host() <span style="color:#66d9ef">else</span> { 
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">return</span> 
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                    appModel.navigateTo(category: String(category), index: index)
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The <code>.onOpenURL(URL)</code> implemented here will let the app respond to opening links from a browser or other apps. For example, I chose to respond to links like <a href="pmi://pokedex/99">pmi://pokedex/99</a> and <a href="pmi://berries/16">pmi://berries/16</a>. When the app responds, it looks at the url host and path values. The host value is expected to be one of the supported tab names (pokedex, berries) and the path is expected to contain an index integer value. The <code>AppModel.navigateTo(category, index)</code> function will set the selected tab and its corresponding NavigationPath index, cleanly navigating you to the details.</p>
<p>I think this approach would also work very well with App Intents if you are coming in from a Shortcut, Spotlight or Siri. This wasn&rsquo;t space for all that in this post, however. If you would like to see how that would look, <a href="https://iosdev.space/@drmarkpowell" target="_blank" rel="noopener">send me a message</a> on Mastodon and let me know.</p>
<p>If you want to see the <a href="https://github.com/drmarkpowell/PocketMonsterIndex" target="_blank" rel="noopener">whole Xcode project</a>, browse the code or give it a try (iOS 18 or macOS 15 required to run).</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="next" href="http://localhost:1313/posts/fill-in-the-blank/">
    <span class="title">Next »</span>
    <br>
    <span>Fill In The Blank</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2025 <a href="http://localhost:1313/">Mark Powell</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
